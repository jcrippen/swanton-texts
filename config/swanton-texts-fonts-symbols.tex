%!TEX root = ../swanton-texts.tex
%!TEX encoding = UTF-8 Unicode
%%
%% Font support for special symbols (e.g. math).
%%

%% Slashed zero for the nul or zero symbol.
%%
%% This bagbiting cruft is font dependent because most fonts have a circle
%% and line for their null set rather than a slashed zero. Why? Because Unicode
%% doesnâ€™t specify a unique slashed zero character. The distinction is
%% supposedly a â€˜presentation formâ€™Â issue according to the punctilious
%% mathematicians that know better than The Rest of Us. The OpenType
%% specification gives a [zero] feature but that only turns on slashed zero
%% for regular zero. Font designers have, to date, not included an alternate
%% form of the circular null set, despite my repeated suggestions.
%%
%% The \texorpdfstring macro from hyperref should convert the printed
%% form (some flavour of U+0030 Digit Zero) into the real null symbol
%% character (U+2205 Empty Set) for the PDF text stream that is given
%% with cut-and-paste and in PDF bookmarks. The first argument of
%% the \texorpdfstring macro is the visual representation, the second is
%% the text stream representation. Put that in your presentation forms
%% pipe and smoke it.
%%
%% If you ask me â€œCanâ€™t you just use U+0030 and U+0338 Combining
%% Long Solidus Overlay?â€ then I will curse your name unto the ends of
%% the Earth.
%%
%% If \zerofont is undefined then we just hope for the best and use U+2205.
\makeatletter
\@ifundefined{zerofont}%
	{\ProvideDocumentCommand \nul { } {âˆ…}}
	%% Else \texorpdfstring is defined by the hyperref package. If not,
	%% then we just define \nul without it.
	{\@ifundefined{texorpdfstring}%
		% Just do the \zerofont.
		{\ProvideDocumentCommand \nul { } {{\zerofont 0}}}
		% Use \texorpdfstring.
		% FIXME: Using \ProvideDocumentCommand doesnâ€™t work here. Why?
		{\newcommand{\nul}{\texorpdfstring{{\zerofont 0}}{âˆ…}}}}
\makeatother

% https://tex.stackexchange.com/questions/367773/command-textsuperscript-unavailable-in-encoding-tu?noredirect=1
\DeclareTextSymbol{\texttilde} {TU} {"007E}

%% Short command for a superscript question mark.
\ProvideDocumentCommand \supq {} {\textsuperscript*{?}}

%% Load the newunicodechar package.
%%
%% This package lets you define arbitrary macros to run for particular
%% Unicode characters (or any character, really). This allows you to
%% switch fonts per character, and thus use different fonts for e.g.
%% mathematical symbols, Hebrew letters, etc. It should not be used
%% for long stretches of text, which instead should be done with a
%% specialized command or environment that changes the font in a
%% more general way.
%%
%% All that the \newunicodechar command is really doing under the
%% hood is something like plain TeX
%%   \catcode`\X=\active
%%   \defX{\textbf{\char"2323}}
%% but it's much easier to use and so less error-prone.
\usepackage{newunicodechar}

%% This font is specifically for the check symbol that indicates
%% grammaticality or felicity. The macro can be used in contexts
%% where the character can't, with the same printed result. E.g.
%% ExPex can use \ck to determine judgement width, but not âœ“.
%%
%% NOTE: You need two braces here because of macro processing.
%% You can also use \begingroup ... \endgroup. It's a TeX thing.
\ProvideDocumentCommand \ck {} {{\ckfont âœ“}}
%% Two braces again, here and elsewhere below.
\newunicodechar{âœ“}{{\ck}}

%% This font is for the X symbol that contrasts with the check above.
%% The same principles apply.
%\newfontfamily{\badxfont}[Scale=1]{Zapf Dingbats}
\newfontfamily{\badxfont}{Zapf Dingbats}
\ProvideDocumentCommand \badx {} {{\badxfont âœ“}}
\newunicodechar{âœ—}{{\badxfont âœ—}}

%% The slashed zero as the null symbol.
%% The macro is defined in crippenmacros.sty.
\newunicodechar{âˆ…}{{\nul}}

%% The Brill font has Greek-style default versions of {Î², Î¸, Î», Ï‡} and
%% Roman-style versions available with ss20. But I only want
%% the roman Î¸ and not the others. Brill 2.02 doesnâ€™t implement
%% character variant features (cvXX) for these, so the only way to access
%% them is through ss20. I use newunicodechar to automatically add
%% ss20 whenever Î¸ appears.
%%
%% This solution completely ignores the current font. That means that ss20 will
%% be applied in every situation, no matter what. So even if the font is no
%% longer Brill for some reason, Î¸ will still show up with ss20. It works fine if
%% youâ€™re consistent and careful, but it isnâ€™t ideal. cvXX would be ideal.
\newunicodechar{Î¸}{{\addfontfeature{StylisticSet=20}Î¸}}

%% Mathematical symbols.
%%
%% If you have things with diacritics (e.g. math negation) then if
%% these are decomposed (NFD) it will make TeX barf. YHBW.
%%
%% The double braces are on purpose, with the inner pair
%% restricting the scope of the font switching commands.
%%
%% FIXME: This should be in an array with a loop instantiating each
%% character, rather than repeating the same code over and over again.
%% It wouldn't make it any more efficient, but it'd be easier to modify.
%% Actually it would be a couple array+loops, one for each font.

%% Set stuff.
\newunicodechar{âˆˆ}{{\mthfont âˆˆ}}	% element
\newunicodechar{âˆ‰}{{\mthfont âˆ‰}}	% not element
\newunicodechar{âŠ‚}{{\mthfont âŠ‚}}	% proper subset
\newunicodechar{âŠƒ}{{\mthfont âŠƒ}}	% proper superset
\newunicodechar{âŠ†}{{\mthfont âŠ†}}	% total subset
\newunicodechar{âŠ‡}{{\mthfont âŠ‡}}	% total superset
\newunicodechar{âŠŠ}{{\mthfont âŠŠ}}	% nontotal subset
\newunicodechar{âŠ‹}{{\mthfont âŠ‹}}	% nontotal superset
\newunicodechar{âŠˆ}{{\mthfont âŠˆ}}	% not total subset
\newunicodechar{âŠ‰}{{\mthfont âŠ‰}}	% not total superset
\newunicodechar{âˆª}{{\mthfont âˆª}}	% union
\newunicodechar{âˆ©}{{\mthfont âˆ©}}	% intersection
\newunicodechar{â‹ƒ}{{\mthfont â‹ƒ}}	% big union

%% Logic and quantification.
\newunicodechar{â‰¡}{{\mthfont â‰¡}}	% triple equals
\newunicodechar{â‰¢}{{\mthfont â‰¢}}	% triple not equals
\newunicodechar{â‰…}{{\mthfont â‰…}}	% triple approximately equals
\newunicodechar{âˆ§}{{\mthfont âˆ§}}	% logical and
\newunicodechar{âˆ¨}{{\mthfont âˆ¨}}	% logical or
\newunicodechar{âˆ€}{{\mthfont âˆ€}}	% for all
\newunicodechar{âˆƒ}{{\mthfont âˆƒ}}	% exists
\newunicodechar{âˆ„}{{\mthfont âˆ„}}	% not exists

%% Orderings.
\newunicodechar{âŠ¤}{{\mthfont âŠ¤}}	% supremum, top
\newunicodechar{âŠ¥}{{\mthfont âŠ¥}}	% infimum, bottom
\newunicodechar{âŠ‘}{{\mthfont âŠ‘}}	% precedes
\newunicodechar{âŠ’}{{\mthfont âŠ’}}	% succedes
\newunicodechar{âŠ}{{\mthfont âŠ}}	% strictly precedes
\newunicodechar{âŠ}{{\mthfont âŠ}}	% strictly succedes
\newunicodechar{âŠ‘Ì¸}{{\mthfont âŠ‘Ì¸}}	% not succeeds
\newunicodechar{â‰ª}{{\mthfont â‰ª}}	% much less than
\newunicodechar{â‰«}{{\mthfont â‰«}}	% much greater than
\newunicodechar{â‰¶}{{\mthfont â‰¶}}	% less than over greater than
\newunicodechar{â‰·}{{\mthfont â‰·}}	% greater than over less than
\newunicodechar{â‰¸}{{\mthfont â‰¸}}	% neither less than nor greater than
\newunicodechar{â‰¹}{{\mthfont â‰¹}}	% neither greater than nor less than
\newunicodechar{â‰¼}{{\mthfont â‰¼}}	% curved precedes
\newunicodechar{â‰½}{{\mthfont â‰½}}	% curved succedes
\newunicodechar{â‰º}{{\mthfont â‰º}}	% curved strictly precedes
\newunicodechar{â‰»}{{\mthfont â‰»}}	% curved strictly succedes
\newunicodechar{âŠ€}{{\mthfont âŠ€}}	% not curved strictly succeeds

%% Arrows.
\newunicodechar{â†®}{{\mthfont â†®}} % left right arrow with stroke
\newunicodechar{â‡’}{{\mthfont â‡’}} % double east arrow
\newunicodechar{â‡}{{\mthfont â‡}} % double west arrow
\newunicodechar{â‡”}{{\mthfont â‡”}} % double east-west arrow
\newunicodechar{â‡}{{\mthfont â‡}} % not double east arrow
\newunicodechar{â‡}{{\mthfont â‡}} % not double west arrow
\newunicodechar{â‡}{{\mthfont â‡}} % not double east-west arrow
\newunicodechar{â†¦}{{\mthfont â†¦}} % maps to
\newunicodechar{â†¤}{{\mthfont â†¤}} % maps from
\newunicodechar{â‡¦}{{\mthfont â‡¦}} % leftwards white arrow
\newunicodechar{â‡´}{{\mthfont â‡´}} % right arrow with small circle

%% Calligraphic script letters.
\newunicodechar{ğ’}{{\mthcalfont ğ’}}	% script capital C
\newunicodechar{â„°}{{\mthcalfont â„°}}	% script capital E
\newunicodechar{ğ’¬}{{\mthcalfont ğ’¬}}	% script capital Q
\newunicodechar{â„›}{{\mthcalfont â„›}}	% script capital R
\newunicodechar{â„}{{\mthcalfont â„}}	% script capital I

%% Phonetic stuff.
\newunicodechar{áµƒ}{{\phonfont áµƒ}}	% superscript a
\newunicodechar{áµŠ}{{\phonfont áµŠ}}	% superscript e
\newunicodechar{áµ’}{{\phonfont áµ’}}	% superscript o
\newunicodechar{áµ}{{\phonfont áµ}}	% superscript k
\newunicodechar{áµ˜}{{\phonfont áµ˜}}	% superscript u
\newunicodechar{áµ‰}{{\phonfont áµ‰}}	% superscript e
\newunicodechar{áµ—}{{\phonfont áµ—}}	% superscript t
\newunicodechar{êœ}{{\phonfont êœ}}	% superscript !
\newunicodechar{êœœ}{{\phonfont êœœ}}	% superscript down arrow
\newunicodechar{êœ›}{{\phonfont êœ›}}	% superscript up arrow
\newunicodechar{â‚š}{{\phonfont â‚š}}	% subscript p
\newunicodechar{â‚}{{\phonfont â‚}}	% subscript a
\newunicodechar{á´´}{{\phonfont á´´}}	% superscript capital H

%% Emoji.
\newunicodechar{â˜•}{{\emojifont â˜•}}	% coffee cupâ‡·
\newunicodechar{ğŸ›¢}{{\emojifont ğŸ›¢}}	% metal can/barrel
%\newuncodechar{ğŸ¥›}{{\emojifont ğŸ¥›}}	% glass of milk

%% Miscellanea.
%\newunicodechar{ğ‘£}{{\mthfont ğ‘£}}
\newunicodechar{Â¬}{{\mthfont Â¬}}	% not: Brill has this but itâ€™s too low
\newunicodechar{â‹®}{{\mthfont â‹®}}	% vertical ellipsis
\newunicodechar{â‹¯}{{\mthfont â‹¯}}	% middle horizontal ellipsis
\newunicodechar{â„“}{{\mthfont â„“}}	% script small l
\newunicodechar{â‰}{{\mthfont â‰}}	% def equals
\newunicodechar{â‰‚}{{\mthfont â‰‚}}	% minus tilde
\newunicodechar{âŠ—}{{\upshape\mthfont âŠ—}}	% circle times
\newunicodechar{â¬š}{{\symfont â¬š}}	% dotted box
\newunicodechar{Ò€}{{\timesfont Ò€}}	% Cyrillic capital koppa
\newunicodechar{Ò}{{\timesfont Ò}}		% Cyrillic small koppa
\newunicodechar{ğ¤’}{{\phoenfont ğ¤’}}	% Phoenician qof
